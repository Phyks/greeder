#!/bin/sh

# You'll need to manually install the following
# command line utilities :
# * csstidy to minify CSS
# * jsmin to minify JS

echo ">>> Minify hook started"

if [ -e "js/script.combined.js" ]
then
    rm js/script.combined.js
fi
if [ -e "js/script.min.js" ]
then
    rm js/script.min.js
fi
if [ -e "css/style.min.css" ]
then
    rm css/style.min.css
fi

# Combine js files
cat js/script.js > js/script.combined.js

csstidy css/style.css css/style.min.css
jsmin < js/script.combined.js > js/script.min.js

rm js/script.combined.js

git add css/style.min.css
git add js/script.min.js

echo -e ">>> CSS and JS files minified\n"
